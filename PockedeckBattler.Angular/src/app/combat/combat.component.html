<div class="h-100 w-100 hstack gap-2" *ngIf="combat">
  <div class="h-100 flex-fill vstack">
    <div [ngStyle]="{ 'height.%': 35 }">
      <app-combat-side-common-elements
        [combat]="combat"
        [side]="combat.opponent"
        [isAi]="combat.opponentIsAi"
        [highlightEnemies]="enemyTargets"
        [highlightSource]="source && source.side === combat.player.side ? undefined : source?.name"
        [invert]="true"
      ></app-combat-side-common-elements>
    </div>

    <hr />

    <app-combat-common-elements [combat]="combat"></app-combat-common-elements>

    <hr />

    <div [ngStyle]="{ 'height.%': 35 }">
      <app-combat-side-common-elements
        [combat]="combat"
        [side]="combat.player"
        [isAi]="combat.playerIsAi"
        [highlightAllies]="allyTargets"
        [highlightSource]="source && source.side === combat.player.side ? source?.name : undefined"
      ></app-combat-side-common-elements>
    </div>

    <div class="flex-fill">
      <app-player-side-elements
        [combat]="combat"
        [disabled]="combat.currentSide !== combat.player.side || combat.over"
        (play)="play($event)"
        (endTurn)="endTurn()"
        (hover)="hoverCard($event)"
      >
      </app-player-side-elements>
    </div>
  </div>
  <div class="h-100 w-25 overflow-auto">
    <app-combat-log [log]="combat.log" (highlight)="hoverCharacter($event)"></app-combat-log>
  </div>
</div>
